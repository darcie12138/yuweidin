(function(){function t(){var e,n=0,t={},o=window.location.search.substring(1),s=o.split("&");for(n=0;n<s.length;n++)e=s[n].split("="),typeof t[e[0]]=="undefined"?t[e[0]]=e[1]:typeof t[e[0]]=="string"?t[e[0]]=[t[e[0]],e[1]]:t[e[0]].push(e[1]);return t}var e=function(){var e=window.location.href.split("?")[0];return function(t){typeof t=="string"?window.history.replaceState(null,'',e+t):window.history.replaceState(null,'',e)}}();$(document).ready(function(){i=$(".js-tags"),d=i.find(".tag-button"),r=i.find(".tag-button--all"),c=$(".js-result"),s=c.find("section"),n=[],o=null,l=[],a=!1,s.each(function(){n.push($(this).find(".item"))});function m(){var e,t=0;for(e=0;e<s.length;e++)l.push(t),t+=s.eq(e).find(".item").length;l.push(t)}function f(e){if(!e)return r;var t=d.filter('[data-encode="'+e+'"]');return t.length===0?r:t}function u(e){e&&(e.addClass("focus"),o&&!o.is(e)&&o.removeClass("focus"),o=e)}function h(r,m){var t,o,l,d,h,p,i={};for(t=0;t<n.length;t++){h=n[t];for(o=0;o<h.length;o++)if(r===''||r===void 0)i[t]||(i[t]={}),i[t][o]=!0;else{p=h.eq(o).data("tags").split(",");for(d=0;d<p.length;d++)if(p[d]===r){i[t]||(i[t]={}),i[t][o]=!0;break}}}for(t=0;t<n.length;t++){i[t]&&s.eq(t).removeClass("d-none"),i[t]||s.eq(t).addClass("d-none");for(o=0;o<n[t].length;o++)i[t]&&i[t][o]?n[t].eq(o).removeClass("d-none"):n[t].eq(o).addClass("d-none")}a||(c.removeClass("d-none"),a=!0),m?(u(m),l=m.attr("data-encode"),l===''||typeof l!="string"?e():e("?tag="+l)):u(f(r))}var n,s,o,i,a,r,c,l,d,p=t(),g=p.tag;m(),h(g),i.on("click","a",function(){h($(this).data("encode"),$(this))})})})()